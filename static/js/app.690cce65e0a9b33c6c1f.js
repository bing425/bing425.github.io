webpackJsonp([1],{0:function(e,t){},"2q79":function(e,t){},NHnr:function(e,t,n){"use strict";function i(e){n("we4B")}function a(e){if(e)throw e;b.start(function(){console.log("Online status: ",b.isOnline()?"online":"offline")})}function o(e){n("2q79")}Object.defineProperty(t,"__esModule",{value:!0});var s=n("g5wB"),r=n("z5U/"),l=n.n(r),c=n("ORbq"),p=(n("rK6t"),{name:"app"}),f=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},d=[],u={render:f,staticRenderFns:d},g=u,h=n("/Xao"),m=i,v=h(p,g,!1,m,null,null),w=v.exports,_=n("zO6J"),y="ipfs-"+Math.random(),b=void 0,$={name:"HelloWorld",data:function(){return{readList:[],currentPage:1,count:0,pickerOptions:{disabledDate:function(e){return e.getTime()>Date.now()},shortcuts:[{text:"今天",onClick:function(e){e.$emit("pick",new Date)}},{text:"昨天",onClick:function(e){var t=new Date;t.setTime(t.getTime()-864e5),e.$emit("pick",t)}},{text:"一周前",onClick:function(e){var t=new Date;t.setTime(t.getTime()-6048e5),e.$emit("pick",t)}}]},selectDate:"",fileChange:function(){var e,t=this,n=this.$refs["upload-inner"].$refs.input;if(n.files[0]){if(!/(\.gif$)|(\.jpg$)|(\.png$)/g.test(n.files[0].name))return void this.$message({message:"仅能上传gif、jpg、png文件",type:"warning"});var i=n.files[0].name,a=i.lastIndexOf("."),o=i.length,s=i.substring(a+1,o);n.files.length>0&&(e=new FileReader,e.onload=function(e){b.isOnline()?b.files.add(new b.types.Buffer(this.result),function(e,n){if(e||!n)return console.error("Error - ipfs files add",e,n);n.forEach(function(e){var n=Math.floor(5*Math.random()),i=e.hash+"?"+n+"."+s;t.$http.get("/node/record/"+i).then(function(e){})})}):alert("还没准备好,请稍候再试")},e.readAsArrayBuffer(n.files[0]))}}}},methods:{open:function(e){window.open(e)},handleCurrentChange:function(e){var t=this;this.$http.jsonp("https://2120db1d.ngrok.io/node/record",{jsonp:"cb",params:{page:this.currentPage,size:10}}).then(function(e){console.log(e),t.readList=e.body.docs,t.count=e.body.count})},changeFile:function(){var e,t=this,n=this.$refs.fileCom.$el.querySelector("input");if(n.files[0]){if(!/(\.gif$)|(\.jpg$)|(\.png$)/g.test(n.files[0].name))return void this.$message({message:"仅能上传gif、jpg、png文件",type:"warning"});var i=n.files[0].name,a=i.lastIndexOf("."),o=i.length,s=i.substring(a+1,o);n.files.length>0&&(e=new FileReader,e.onload=function(e){b.isOnline()?b.files.add(new b.types.Buffer(this.result),function(e,n){if(e||!n)return console.error("Error - ipfs files add",e,n);n.forEach(function(e){var n=Math.floor(5*Math.random()),i=e.hash+"?"+n+"."+s;t.$http.jsonp("https://2120db1d.ngrok.io/node/record/"+i),t.readList.unshift({createAt:new Date,hash:i})})}):alert("还没准备好,请稍候再试")},e.readAsArrayBuffer(n.files[0]))}}},mounted:function(){var e=this;this.$http.jsonp("https://2120db1d.ngrok.io/node/record",{jsonp:"cb",params:{page:1,size:10}}).then(function(t){console.log(t),e.readList=t.body.docs,e.count=t.body.count}),b=new Ipfs({init:!1,start:!1,repo:y}),b.init(a)}},x=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("span",{staticStyle:{color:"#666","font-size":"42px"}},[e._v("无限共享图床")]),e._v(" "),n("br"),n("br"),e._v(" "),n("el-upload",{ref:"fileCom",staticClass:"upload-demo",attrs:{"on-change":e.changeFile,action:"",drag:""}},[n("i",{staticClass:"el-icon-upload"}),e._v(" "),n("div",{staticClass:"el-upload__text"},[e._v("将文件拖到此处，或"),n("em",[e._v("点击上传")])]),e._v(" "),n("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传 gif / jpg / png 文件")])]),e._v(" "),n("el-row",[n("el-col",{staticStyle:{padding:"15px"},attrs:{span:8}},[n("el-date-picker",{staticStyle:{float:"left"},attrs:{align:"right",type:"date",placeholder:"选择日期","picker-options":e.pickerOptions},model:{value:e.selectDate,callback:function(t){e.selectDate=t},expression:"selectDate"}})],1)],1),e._v(" "),n("el-row",{staticStyle:{"column-count":"4"}},e._l(e.readList,function(t,i){return n("div",{key:t,staticStyle:{padding:"15px"}},[n("el-card",{attrs:{"body-style":{padding:"0px"}}},[n("img",{staticClass:"image",staticStyle:{"padding-bottom":"40px"},attrs:{src:"https://ipfs.io/ipfs/"+t.hash},on:{click:function(){e.open("https://ipfs.io/ipfs/"+t.hash)}}}),e._v(" "),n("div",{staticStyle:{padding:"14px","margin-top":"-46px"}},[n("div",{staticClass:"bottom clearfix"},[n("time",{staticClass:"time"},[e._v(e._s(t.createAt))])])])])],1)})),e._v(" "),n("el-row",[n("el-pagination",{attrs:{"current-page":e.currentPage,"page-size":10,layout:"total, prev, pager, next",total:e.count},on:{"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.currentPage=t}}})],1)],1)},k=[],C={render:x,staticRenderFns:k},j=C,O=n("/Xao"),D=o,A=O($,j,!1,D,"data-v-2d2ca124",null),S=A.exports;s.default.use(_.a);var B=new _.a({routes:[{path:"/",name:"HelloWorld",component:S}]});s.default.use(l.a),s.default.use(c.a),s.default.config.productionTip=!1,new s.default({el:"#app",router:B,template:"<App/>",components:{App:w}})},rK6t:function(e,t){},we4B:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.690cce65e0a9b33c6c1f.js.map