webpackJsonp([1],{0:function(e,t){},NHnr:function(e,t,n){"use strict";function i(e){n("we4B")}function a(e){if(e)throw e;$.start(function(){console.log("Online status: ",$.isOnline()?"online":"offline")})}function s(e){n("t0jX")}Object.defineProperty(t,"__esModule",{value:!0});var r=n("g5wB"),o=n("z5U/"),l=n.n(o),c=n("ORbq"),p=(n("rK6t"),{name:"app"}),f=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},u=[],d={render:f,staticRenderFns:u},g=d,h=n("/Xao"),m=i,v=h(p,g,!1,m,null,null),w=v.exports,_=n("zO6J"),y="ipfs-"+Math.random(),$=void 0,C={name:"HelloWorld",data:function(){return{readList:[],count:0,pickerOptions:{disabledDate:function(e){return e.getTime()>Date.now()},shortcuts:[{text:"今天",onClick:function(e){e.$emit("pick",new Date)}},{text:"昨天",onClick:function(e){var t=new Date;t.setTime(t.getTime()-864e5),e.$emit("pick",t)}},{text:"一周前",onClick:function(e){var t=new Date;t.setTime(t.getTime()-6048e5),e.$emit("pick",t)}}]},selectDate:"",fileChange:function(){var e,t=this,n=this.$refs["upload-inner"].$refs.input;if(n.files[0]){if(!/(\.gif$)|(\.jpg$)|(\.png$)/g.test(n.files[0].name))return void this.$message({message:"仅能上传gif、jpg、png文件",type:"warning"});var i=n.files[0].name,a=i.lastIndexOf("."),s=i.length,r=i.substring(a+1,s);n.files.length>0&&(e=new FileReader,e.onload=function(e){$.isOnline()?$.files.add(new $.types.Buffer(this.result),function(e,n){if(e||!n)return console.error("Error - ipfs files add",e,n);n.forEach(function(e){var n=Math.floor(5*Math.random()),i=e.hash+"?"+n+"."+r;t.$http.get("/node/record/"+i).then(function(e){})})}):alert("还没准备好,请稍候再试")},e.readAsArrayBuffer(n.files[0]))}}}},methods:{open:function(e){window.open(e)},changeFile:function(){var e,t=this,n=this.$refs.fileCom.$el.querySelector("input");if(n.files[0]){if(!/(\.gif$)|(\.jpg$)|(\.png$)/g.test(n.files[0].name))return void this.$message({message:"仅能上传gif、jpg、png文件",type:"warning"});var i=n.files[0].name,a=i.lastIndexOf("."),s=i.length,r=i.substring(a+1,s);n.files.length>0&&(e=new FileReader,e.onload=function(e){$.isOnline()?$.files.add(new $.types.Buffer(this.result),function(e,n){if(e||!n)return console.error("Error - ipfs files add",e,n);n.forEach(function(e){var n=Math.floor(5*Math.random()),i=e.hash+"?"+n+"."+r;t.$http.jsonp("http://8pwbpp.natappfree.cc/node/record/"+i),t.readList.unshift({createAt:new Date,hash:i})})}):alert("还没准备好,请稍候再试")},e.readAsArrayBuffer(n.files[0]))}}},mounted:function(){var e=this;this.$http.jsonp("http://8pwbpp.natappfree.cc/node/record",{jsonp:"cb"}).then(function(t){console.log(t),e.readList=t.body.docs,e.count=t.body.count}),$=new Ipfs({init:!1,start:!1,repo:y}),$.init(a)}},x=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-upload",{ref:"fileCom",staticClass:"upload-demo",attrs:{"on-change":e.changeFile,action:"",drag:""}},[n("i",{staticClass:"el-icon-upload"}),e._v(" "),n("div",{staticClass:"el-upload__text"},[e._v("将文件拖到此处，或"),n("em",[e._v("点击上传")])]),e._v(" "),n("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传 gif / jpg / png 文件")])]),e._v(" "),n("el-row",[n("el-col",{staticStyle:{padding:"15px"},attrs:{span:8}},[n("el-date-picker",{staticStyle:{float:"left"},attrs:{align:"right",type:"date",placeholder:"选择日期","picker-options":e.pickerOptions},model:{value:e.selectDate,callback:function(t){e.selectDate=t},expression:"selectDate"}})],1)],1),e._v(" "),n("el-row",{staticStyle:{"column-count":"4"}},e._l(e.readList,function(t,i){return n("div",{key:t,staticStyle:{padding:"15px"}},[n("el-card",{attrs:{"body-style":{padding:"0px"}}},[n("img",{staticClass:"image",attrs:{src:"https://ipfs.io/ipfs/"+t.hash},on:{click:function(){e.open("//ipfs.io/ipfs/"+t.hash)}}}),e._v(" "),n("div",{staticStyle:{padding:"14px"}},[n("div",{staticClass:"bottom clearfix"},[n("time",{staticClass:"time"},[e._v(e._s(t.createAt))])])])])],1)})),e._v(" "),n("el-row",[n("el-pagination",{attrs:{"current-page":e.currentPage1,"page-size":12,layout:"total, prev, pager, next",total:e.count},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.currentPage1=t}}})],1)],1)},b=[],k={render:x,staticRenderFns:b},j=k,O=n("/Xao"),D=s,A=O(C,j,!1,D,"data-v-0d09078c",null),B=A.exports;r.default.use(_.a);var S=new _.a({routes:[{path:"/",name:"HelloWorld",component:B}]});r.default.use(l.a),r.default.use(c.a),r.default.config.productionTip=!1,new r.default({el:"#app",router:S,template:"<App/>",components:{App:w}})},rK6t:function(e,t){},t0jX:function(e,t){},we4B:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.9514fd5496332b6855a5.js.map